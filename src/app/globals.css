@import "tailwindcss";

/* =============================================================================
   hisoles Design System

   COLOR SOURCE OF TRUTH
   All colors are defined here. For JavaScript contexts (Canvas, ImageResponse),
   see the mirrored values in: src/lib/colors.ts
   ============================================================================= */

@theme {
  /* ---------------------------------------------------------------------------
     Brand Colors (OKLCH with HEX fallbacks)
     --------------------------------------------------------------------------- */

  /* Washi - warm cream paper background */
  --color-washi: #FCFAF5;
  --color-washi: oklch(98.5% 0.006 95);

  /* Sumi - ink black for text */
  --color-sumi: #1A1A1A;
  --color-sumi: oklch(18.4% 0 0);

  /* Persimmon - orange accent for CTAs and highlights */
  --color-persimmon: #E85D04;
  --color-persimmon: oklch(62.8% 0.19 48);

  /* Stone - medium gray for secondary text */
  --color-stone: #4A4A4A;
  --color-stone: oklch(36.5% 0 0);

  /* Charcoal - dark gray for tertiary elements */
  --color-charcoal: #222222;
  --color-charcoal: oklch(20% 0 0);

  /* ---------------------------------------------------------------------------
     Opacity Variants
     --------------------------------------------------------------------------- */
  --color-persimmon-25: oklch(62.8% 0.19 48 / 0.25);
  --color-persimmon-50: oklch(62.8% 0.19 48 / 0.5);
  --color-persimmon-60: oklch(62.8% 0.19 48 / 0.6);
  --color-sumi-40: oklch(18.4% 0 0 / 0.4);
  --color-washi-08: oklch(98.2% 0.005 106 / 0.08);

  /* ---------------------------------------------------------------------------
     Typography
     --------------------------------------------------------------------------- */
  --font-display: var(--font-general-sans);
  --font-body: var(--font-switzer);
  --font-mono: var(--font-space-mono);

  /* Letter spacing */
  --tracking-tight-logo: -0.02em;
  --tracking-wide-cta: 0.35em;
  --tracking-rotated: 0.4em;

  /* ---------------------------------------------------------------------------
     Animation Timing System (Ma-inspired rhythm)
     --------------------------------------------------------------------------- */

  /* Duration tokens */
  --duration-breath: 3600ms;      /* Ambient, meditative animations */
  --duration-attention: 600ms;    /* User-triggered state changes */
  --duration-whisper: 400ms;      /* Micro-interactions */
  --delay-ma: 80ms;               /* Intentional anticipation pause */

  /* Easing curves */
  --ease-emerge: cubic-bezier(0.16, 1, 0.3, 1);   /* Smooth attack, circOut-like */
  --ease-retreat: cubic-bezier(0.7, 0, 0.84, 0);  /* Graceful exit */
  --ease-breath: cubic-bezier(0.37, 0, 0.63, 1);  /* Sine-wave breathing */
}

/* =============================================================================
   Global Styles
   ============================================================================= */

body {
  background-color: var(--color-washi);
  color: var(--color-sumi);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
}

/* Interactive elements: show pointer cursor */
@layer base {
  button,
  [role="button"] {
    cursor: pointer;
  }
}

/* Hide scrollbar (Immersion) */
::-webkit-scrollbar {
  width: 0px;
  background: transparent;
}
html {
  scrollbar-width: none;
}

/* Selection */
::selection {
  background: var(--color-persimmon);
  color: var(--color-washi);
}

/* Focus (premium trust) */
:focus-visible {
  outline: 2px solid
    color-mix(in oklab, var(--color-persimmon) 75%, transparent);
  outline-offset: 3px;
}

/* Reduced motion: calm becomes stillness */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}

/* =============================================================================
   Animations
   ============================================================================= */

/* Tremor (used sparingly in Tension) */
@keyframes tremor {
  0%,
  100% {
    transform: translate3d(0, 0, 0);
  }
  20% {
    transform: translate3d(-0.5px, 0.5px, 0);
  }
  40% {
    transform: translate3d(0.5px, -0.5px, 0);
  }
  60% {
    transform: translate3d(-0.5px, -0.5px, 0);
  }
  80% {
    transform: translate3d(0.5px, 0.5px, 0);
  }
}

.chaos-tremor {
  animation: tremor 0.18s infinite;
}

/* Meridian heartbeat (audio-less, CSS-only) */
@keyframes meridian-heartbeat {
  0%,
  100% {
    filter: drop-shadow(0 0 0px var(--color-persimmon-50));
    transform: scale(1);
  }
  50% {
    filter: drop-shadow(0 0 6px var(--color-persimmon-50));
    transform: scale(1.05);
  }
}

html[data-meridian-idle="true"] .meridian-heartbeat {
  animation: meridian-heartbeat var(--duration-breath) var(--ease-breath) infinite;
}

html[data-meridian-idle="false"] .meridian-heartbeat {
  animation: none;
  filter: none;
}

/* Ink wash halo (washi-inspired watercolor bleed) */
@keyframes ink-wash {
  0%,
  100% {
    opacity: 0.15;
    transform: scale(1);
  }
  50% {
    opacity: 0.25;
    transform: scale(1.15);
  }
}

.ink-wash-halo {
  animation: ink-wash var(--duration-breath) var(--ease-breath) infinite;
}

/* =============================================================================
   Kakemono Typography Utilities
   ============================================================================= */

@layer utilities {
  .k-kicker {
    font-family: var(--font-mono);
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide-cta);
    color: color-mix(in oklab, var(--color-stone) 70%, transparent);
  }

  .k-title {
    font-family: var(--font-body);
    font-weight: 300;
    line-height: 0.95;
    color: var(--color-sumi);
    text-wrap: balance;
  }

  .k-title-xl {
    font-size: clamp(2.25rem, 4vw, 3.75rem);
  }

  .k-title-md {
    font-size: clamp(1.75rem, 3vw, 2.5rem);
  }

  .k-body {
    font-family: var(--font-body);
    color: color-mix(in oklab, var(--color-stone) 92%, transparent);
  }

  /* "Whisper text" (Space Mono ritual copy) */
  .k-whisper {
    font-family: var(--font-mono);
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide-cta);
    color: color-mix(in oklab, var(--color-stone) 60%, transparent);
  }

  /* Kanji: intentionally Japanese serif stack (quiet ink, not random fallback) */
  .font-kanji {
    font-family: "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Yu Mincho", "Noto Serif JP", serif;
    font-feature-settings: "palt" 1;
  }
}
